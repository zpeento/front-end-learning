<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>webStorage 留言簿</title>
</head>
<body>
	
	<textarea name="" id="comment" cols="30" rows="10"></textarea></br>
	<input type="button" value="保存数据" onclick="saveStorage('comment')">
	<input type="button" value="读取数据" onclick="loadStorage('msg')">
	<input type="button" value="删除数据" onclick="clearStorage('msg')">
	<p id="msg"></p>
	<script>
		function saveStorage(id){
			var data = document.getElementById(id).value;
			var time = new Date().getTime();
			// 用时间戳作为键
			localStorage.setItem(data,time);
			alert('数据已保存');
		}

		function loadStorage(id){
			var result = "<table border ='1'>";
			for(var i = 0 ; i < localStorage.length ; i++){
				var key = localStorage.key(i);
				var value = localStorage.getItem(key);
				var date = new Date();
				//使数据以时间格式输出
				date.setTime(key);
				result +='<tr><td>'+key+'</td><td>'+date+'</td><td>'+value+'</td><tr>'
			}
			result+='</table>'
			var target=document.getElementById(id)
			target.innerHTML=result;
		}

		function clearStorage(){
			//删除localStorage中的数据
			localStorage.clear();
			alert('数据已经删除');
			loadStorage('msg');
		}
	</script>
</body>
</html>